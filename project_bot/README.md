# Diploma_bot_15092021
Дипломный проект Skillbox Basic Python телеграмм бот может находить отели по введенным характеристикам.
Для корректной работы бота требуются следующие модули:
- peewee==3.14.4
- requests==2.26.0
- pyTelegramBotAPI==4.0.0
- telebot-calendar==1.2
- python-dotenv==0.15.0
а также Python не ниже 3.7 версии.

### Структура бота
Бот состоит из следующих файлов:
+ main.py - основной скрипт, содержит функции генерирования кнопок интерфейса и их обработку
+ loader.py - содержит переменные и классы, инициализация которых необходима для работы программы
+ handler.py - содержит функции проверки и обработки сообщений пользователя
+ radapi.py - содержит класс SearchHotel, методы которого получают необходимую информацию от API, пакуют и отправляют пользователю
+ models.py - содержит модели для базы данных
+ history.py - содержит функции для записи в базу данных и вывода пользователю в чат собранной из базы информации
+ env.template - содержит токен подключения бота к серверам Telegram и токен подключения к API hotels.com. Необходимо самостоятельно создать файл .env и поместить в него собственные токены
+ requirements.txt - содержит список необходимых зависимостей

#### Получение токенов
Токены необходимо поместить в файл *.env* следующим образом:
- TELEGRAM_API_TOKEN = "Токен бота полученный от @BotFather"
- RAPID_API_TOKEN = "Ключ к API - rapidapi.com/apidojo/api/hotels4/"

#### Запуск бота
Установите необходимые модули и подставьте в файл *.env* полученные токены.
Перейдите в консоли в соответствующию директорию и запустите бот командой python main.py
После запуска вы сможете использовать бота с именем, которые выбрали для него при работе с @BotFather

### Команды бота
Бот способен воспринять шесть команд и откликнуться на три кнопки интерфейса:
+ /start <br>
вывод приветственного сообщения
+ /help <br>
вывод списка команд бота
+ /lowprice <br>
поиск отелей с самой низкой ценой
+ /highprice <br>
поиск отелей с самой высокой ценой
+ /bestdeal <br>
поиск отелей по заданным пользователем фильтрам расстояния от центра и цены
+ /history <br>
вывод истории запросов

+ Найти отель - отправляет сообщение с календарем для выбора даты бронирования
+ Руководство - аналогично команде /help выводит список команд бота
+ Информация - выводит краткую информацию о проекте